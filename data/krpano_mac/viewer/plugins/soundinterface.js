/* krpano 1.18.5 soundinterface plugin (build 2015-08-04) */
var krpanoplugin=function(){function s(){n(!document.hidden)}function B(){}function C(){var a=arguments;if(1<a.length){var b=String(a[0]).toLowerCase(),g=a[1],D=2<a.length?parseInt(a[2]):1,l=3<a.length?a[3]:null;if("auto"==b||"null"==b||""==b)b="autoid_"+e.timertick+"_"+Math.ceil(1E3*e.random);var h=g,a=h.split("|");if(1<a.length){if(null==f&&(f="",h=document.createElement("audio"),!(null===h||void 0===h)))if(f+=".wav",void 0!==h.canPlayType){var j=h.canPlayType("audio/ogg");j.match(/maybe|probably/i)&&
(f+=".ogg",f+=".oga");!1==(e.device.android&&e.device.firefox)&&(j=h.canPlayType("audio/mpeg"),j.match(/maybe|probably/i)&&(f+=".mp3",f+=".mp2",f+=".mpa"));j=h.canPlayType("audio/mp4");j.match(/maybe|probably/i)&&(f+=".mp4");j=h.canPlayType("audio/wav");j.match(/maybe|probably/i)&&(f+=".wav")}else f+=".mp3";var j=a.length,m,h=null;for(m=0;m<j;m++){var p=String(a[m]).toLowerCase(),p=p.slice(p.lastIndexOf("."));if(0<f.indexOf(p)){h=a[m];break}}null==h&&(h=a)}a=w.rootpath;null!=a&&0<a.length&&"null"!=
String(a).toLowerCase()?"/"!=a.charAt(a.length-1)&&(a+="/"):a="";var g=a=unescape(e.parsePath(a+h)),c=null;if(q&&x&&void 0!==d[b]){c=d[b];try{c.currentTime=0,c.pause()}catch(n){}d[b]=null;delete d[b];c=null}if(null!=c||void 0!==d[b]){null==c?c=d[b]:d[b]=c;try{c.currentTime=0,c.pause()}catch(r){}}else{c=document.createElement("audio");if(!c){e.trace(2,y);return}c.addEventListener("error",function(){e.trace(3,"soundinterface - loading of "+g+" failed!");d[b]=null;delete d[b];c=null},!0);c.addEventListener("ended",
function(){try{0<c.loopcount?(c.loopcount--,0==c.loopcount?l&&e.call(l):(c.currentTime=0,c.play())):(c.currentTime=0,c.play())}catch(a){}},!0);d[b]=c}try{if(c.loopcount=D,c.src=g,c&&(c.volume=t,c.play()),q&&c&&c.paused){var u=document.body,v=function(){try{u.removeEventListener("touchstart",v,!0),k&&k.paused&&!k.ended&&k.play()}catch(a){k=null}};u.removeEventListener("touchstart",v,!0);k=c;u.addEventListener("touchstart",v,!0)}}catch(s){e.trace(2,y)}}}function E(a){if(a=d[String(a).toLowerCase()])try{a.pause()}catch(b){}}
function F(a){if(a=d[String(a).toLowerCase()])try{a.paused&&a.play()}catch(b){}}function G(a){if(a=d[String(a).toLowerCase()])try{a.paused?a.play():a.pause()}catch(b){}}function H(a){if(a=d[String(a).toLowerCase()]){a==k&&(k=null);try{a.currentTime=0,a.pause()}catch(b){}}}function z(){var a,b;for(a in d)if((b=d[a])&&void 0!==b.paused){try{b.pause()}catch(g){}d[a]=null}d=[];k=null}function n(a){var b,g;for(b in d){g=d[b];try{g&&void 0!==g.paused&&(!1==a?!1==g.paused&&(g.pause(),g.needresume=!0):g.needresume&&
(g.needresume=!1,g.play()))}catch(e){}}}function A(){t=l?0:r;var a,b;for(a in d)if(b=d[a])try{b.volume=t,q&&(l?!1==b.paused&&(b._krp_muted=!0,b.pause()):!0==b._krp_muted&&(b._krp_muted=!1,b.play()))}catch(e){}}var w=null,e=null,d=[],k=null,q=!1,x=!1,y="Soundinterface Plugin - HTML5 audio is not supported by this browser!",r=1,l=!1,t=1;this.registerplugin=function(a,b,d){e=a;w=d;"1.16">e.version?e.trace(3,"Soundinterface Plugin - too old krpano version, min. version is 1.16!"):(d.keep=!0,d.registerattribute("rootpath",
""),d.registerattribute("volume",1,function(a){r=a;A()},function(){return r}),d.registerattribute("mute",!1,function(a){l=0<="yesontrue1".indexOf(String(a).toLowerCase());A()},function(){return l}),e.soundinterface=d,e.preloadsound=B,e.playsound=C,e.pausesound=E,e.resumesound=F,e.pausesoundtoggle=G,e.stopsound=H,e.stopallsounds=z,a=navigator.userAgent,b=a.indexOf("OS "),0<b&&(b+=3,"4.2">a.slice(b,a.indexOf(" ",b)).split("_").join(".")&&(x=!0)),q=e.device.ios||e.device.android,window.addEventListener("pagehide",
function(){n(!1)},!1),window.addEventListener("pageshow",function(){n(!0)},!1),document.addEventListener("visibilitychange",s))};this.unloadplugin=function(){try{z(),document.removeEventListener("visibilitychange",s)}catch(a){}};var f=null};
