var gui_window_state={};(function(){function l(){i||(i={}),s==="maximized"?i.mode="maximized":i.mode="normal",s==="normal"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height)}function c(){var e=Math.min(screen.width,screen.availWidth),t=Math.min(screen.height,screen.availHeight),n=i?i.mode:"normal",s=i?i.width|0:0,o=i?i.height|0:0,u=i?i.x:undefined,a=i?i.y:undefined;if(n=="normal")if(u<=0||a<=0){u=a=-1;if(s>=e||o>=t)s=o=0}s<=100&&(s=e*.6>>3<<3,s<800&&(s=800),s=760),o<=100&&(o=t*.9>>3<<3,680<t-40&&(o=680));if(u===undefined||u<0||u>=e)u=e/2-s/2|0;if(a===undefined||a<0||a>=t)a=t/2-o/2|0;u<0&&(u=0),a<0&&(a=0),u+s>=e&&(u+=Math.min(e-(u+s),0)),a+o>=t&&(a+=Math.min(t-(a+o),0)),u+s>=e&&(s=e-u),a+o>=t&&(o=t-a),u>=e&&(u=e/2-s/2|0),a>=t&&(a=t/2-o/2|0),f={t:performance.now(),w:s,h:o},r.resizeTo(s,o),r.moveTo(u,a)}function h(){a=!0,s="maximized"}function p(){s="normal"}function d(){s="minimized"}function v(){s="normal"}function m(){clearTimeout(u),u=setTimeout(l,500)}var e=gui_window_state,t="windowState117",n=require("nw.gui"),r=n.Window.get(),i=null,s="normal",o=null,u=null,a=!1;e.lastsize=null,e.currentsize=null;var f=null;e.load=function(){var e=require("os"),n=(e.platform()+e.type()+process.platform).toLowerCase(),o=n.indexOf("darwin")>=0||n.indexOf("mac")>=0;i=JSON.parse(localStorage[t]||"null"),i?(s=i.mode,s==="maximized"&&o==0?r.maximize():c()):(s="normal",c(),l())},e.show=function(){r.show()},e.save=function(){localStorage&&(localStorage[t]=JSON.stringify(i))},r.on("move",m),r.on("maximize",h),r.on("unmaximize",p),r.on("minimize",d),r.on("restore",v),r.window.addEventListener("resize",function(){e.lastsize=e.currentsize,e.currentsize={w:r.width,h:r.height};if(f){var t=performance.now()-f.t;if(t<3e3){var n=f.w,i=f.h,u=r.width,c=r.height;if(n!=u||i!=c){var h=n,p=i;r.resizeTo(h,p)}f=null;return}f=null}clearTimeout(o),o=setTimeout(function(){a?a=!1:s==="maximized"&&(s="normal"),l()},500)},!1),gui_get_global().shutdownEvents.push(function(){r.removeListener("move",m),r.removeListener("maximize",h),r.removeListener("unmaximize",p),r.removeListener("minimize",d),r.removeListener("restore",v)})})()