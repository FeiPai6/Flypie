var trustflash={};(function(){function o(){var e=(n.platform()+n.type()+process.platform).toLowerCase(),t=e.indexOf("darwin")>=0||e.indexOf("mac")>=0,r=!t&&e.indexOf("freebsd")>=0||e.indexOf("linux")>=0,i=!t&&!r&&e.indexOf("win")>=0;return i?"win":t?"mac":r?"linux":null}function u(){var e=r.dirname(process.execPath);return r.basename(e,r.extname(e))=="runtime"&&(e=r.dirname(e)),o()=="mac"&&(e+=r.sep+"..",e+=r.sep+"..",e+=r.sep+"..",e+=r.sep+"..",e+=r.sep+"..",e+=r.sep+"..",e=r.normalize(e)),e}function a(e){return i.indexOf(e)!==-1}function f(){var e=i.join(""),t=e.indexOf("\0");if(t>0&&t<e.length){i=[];return}var n,r;r=i.length;for(n=0;n<r;n++){var s=i[n];s.indexOf("/tmp/.org.chromium")==0&&(i.splice(n,1),n--,r--)}}function l(e,r){var s=new Buffer(3);s[0]=239,s[1]=187,s[2]=191;var o=new Buffer(i.join(n.EOL),"utf8"),u=Buffer.concat([s,o]);t.writeFile(e,u,null,function(e){e?r(!1):r(!0)})}function c(e){return function(e){callback(e)}}function h(e,c){var p=o();c||(s||(s=u()),c=s);if(p=="linux"){var d=r.dirname(r.dirname(top.window.location.pathname));if(c!=d){var v=e;e=function(e){e==1?h(v,d):v(!1)}}}if(a(c))e(!0);else{var m="krpano.cfg",g=null,y="Flash Player",b="#Security",w="FlashPlayerTrust";p=="win"?g=process.env.APPDATA+"\\Macromedia":p=="mac"?g=process.env.HOME+"/Library/Preferences/Macromedia":p=="linux"?(g=process.env.HOME+"/.macromedia",y="Flash_Player"):e(!1);var E=r.join(g,y,b,w,m);t.readFile(E,null,function(s,o){if(s){try{var u=r.join(g,y,b,w),h=t.existsSync(u);if(!h){var p=r.join(g,y,b);if(!t.existsSync(p)){var d=r.join(g,y);t.existsSync(d)||(t.existsSync(g)||t.mkdirSync(g),t.mkdirSync(d)),t.mkdirSync(p)}t.mkdirSync(u),h=t.existsSync(u)}}catch(v){h=!1}h?(i=[c],l(E,e)):e(!1)}else{if(o.length>3){var m="";if(o[0]==239&&o[1]==187&&o[2]==191)m=o.toString("utf8",3);else if(o[0]==255&&o[1]==254)m=o.toString("utf16le",2);else if(o[0]==254&&o[1]==255){var S=o.length-2>>1,x;for(x=0;x<S;x++){var T=o[2+(x<<1)+0];o[2+(x<<1)+0]=o[2+(x<<1)+1],o[2+(x<<1)+1]=T}m=o.toString("utf16le",2)}else m=o.toString("ascii");i=m.split(n.EOL),f()}else i=[];a(c)?e(!0):(i.push(c),l(E,e))}})}}var e=trustflash,t=require("fs"),n=require("os"),r=require("path"),i=[],s=null;e.isTrusted=a,e.check=h})()