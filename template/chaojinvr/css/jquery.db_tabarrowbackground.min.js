
(function(a){
	a.fn.DB_tabArrowBackground=function(b){
		var c={
			key:"",moveSpeed:300,autoRollingTime:5000
		};
		a.extend(c,b);
		return this.each(function(){
			var j=a(this);
			var n=j.find(".DB_imgSet");
			var g=n.find(">li");
			var z=j.find(".DB_btnSet");
			var x=z.find(">li");
			var v=j.find(".DB_nextBtn");
			var i=j.find(".DB_prevBtn");
			var q=g.length;
			var u=0;
			var o=0;
			var t="next";
			var l=1;
			var m;
			var s=a(window);
			var A=a(document);
			var h=0;
			w();
			function w(){
				 
				d();
				f();
				e();
				k()
			}
			function d(){
				for(var B=0;B<q;B++){
					var C=g.eq(B);
					if(B!=0){
						C.hide()
					}
					C.css({
						position:"absolute",left:h*B
					})
				}
				s.resize(function(){
					h=g.width()
				});
				s.resize()
			}
			function f(){
				j.bind("mouseenter",function(){}).bind("mouseleave",function(){});
				x.bind("mouseenter",function(){
					clearInterval(m)
				}).bind("mouseleave",function(){
					e()
				}).bind("click",function(){
					if(l&&o!=a(this).index()){
						u=a(this).index();
						l=0;
						if(u>o){
							t="next"
						}
						else{
							t="prev"
						}
						r();
						o=u
					}
				});
				v.bind("click",function(){
					if(l){
						t="next";
						l=0;
						if(u==q-1){
							u=0
						}
						else{
							u++
						}
						r();
						o=u
					}
				}).bind("mouseenter",function(){
					clearInterval(m)
				}).bind("mouseleave",function(){
					e()
				});
				i.bind("click",function(){
					if(l){
						t="prev";
						l=0;
						if(u==0){
							u=q-1
						}
						else{
							u--
						}
						r();
						o=u
					}
				}).bind("mouseenter",function(){
					clearInterval(m)
				}).bind("mouseleave",function(){
					e()
				})
			}
			function r(){
				var C=g.eq(u);
				var B=g.eq(o);
				if(t=="next"){
					B.css("left",0).stop().animate({
						left:-h
					}
					,c.moveSpeed,"easeInOutExpo",function(){
						a(this).hide()
					});
					C.css("left",h).show().stop().animate({
						left:0
					}
					,c.moveSpeed,"easeInOutExpo",function(){
						l=1
					})
				}
				else{
					B.css("left",0).stop().animate({
						left:h
					}
					,c.moveSpeed,"easeInOutExpo",function(){
						a(this).hide()
					});
					C.css("left",-h).show().stop().animate({
						left:0
					}
					,c.moveSpeed,"easeInOutExpo",function(){
						l=1
					})
				}
				k()
			}
			function e(){
				m=setInterval(y,c.autoRollingTime)
			}
			function y(){
				v.click()
			}
			function k(){
				for(var C=0;C<q;C++){
					var B=x.eq(C).find("img");
					if(C==u){
						p(B,"_off","_on")
					}
					else{
						p(B,"_on","_off")
					}
				}
			}
			function p(C,B,D){
				var E=C.attr("src");
				if(String(E).search(B)!=-1){
					C.attr("src",E.replace(B,D))
				}
			}
		})
	}
})(jQuery);